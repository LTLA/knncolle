<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>knncolle: Collection of KNN algorithms</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">knncolle
   </div>
   <div id="projectbrief">Collection of KNN methods in C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Collection of KNN algorithms </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__github_workspace_README"></a> <img src="https://github.com/LTLA/knncolle/actions/workflows/run-tests.yaml/badge.svg" alt="Unit tests" style="pointer-events: none;" class="inline"/> <img src="https://github.com/LTLA/knncolle/actions/workflows/doxygenate.yaml/badge.svg" alt="Documentation" style="pointer-events: none;" class="inline"/></p>
<h1>Overview</h1>
<p>This is a header-only C++ library that collects a variety of different k-nearest neighbor algorithms under a consistent interface. As one might expect, the name is not an accident.</p>
<p float="left"></p>
<p><img src="https://i.makeagif.com/media/2-26-2015/JDQzgr.gif" alt="" width="32%" class="inline"/> <img src="https://thumbs.gfycat.com/SneakyPracticalIndianringneckparakeet-max-1mb.gif" alt="" width="32%" class="inline"/> <img src="https://media.tenor.com/images/2b3d5c70f6f4919320480f13427d881c/tenor.gif" alt="" width="32%" class="inline"/> </p>
<p>The aim of <b>knncolle</b> is to enable downstream libraries to easily switch between different methods with a single runtime flag, or by just swapping out the relevant constructors at compile time. Currently, we support the following methods:</p>
<ul>
<li><a href="http://stevehanov.ca/blog/?id=130">Vantage point tree</a></li>
<li><a href="https://github.com/spotify/annoy/">Annoy</a></li>
<li><a href="https://github.com/nmslib/hnswlib/">HNSW</a></li>
<li>Brute force search</li>
</ul>
<h1>Quick start</h1>
<p>Given a matrix with dimensions in the rows and observations in the columns, we can do:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="knncolle_8hpp.html">knncolle/knncolle.hpp</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* ... boilerplate... */</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="classknncolle_1_1Dispatch.html">knncolle::Dispatch&lt;&gt;</a> dispatcher;</div>
<div class="line"><a class="code" href="knncolle_8hpp.html#ac3e4a6ff9f871a52a999276b90ec691e">knncolle::DispatchAlgorithm</a> algo_choice = knncolle::VPTREE; <span class="comment">// or ANNOY, or HNSW...</span></div>
<div class="line"><span class="keyword">auto</span> searcher = dispatcher.<a class="code" href="classknncolle_1_1Dispatch.html#a03ab914b4f36aad8791b84cf84859db0">build</a>(ndim, nobs, matrix.data(), algo_choice);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> results1 = searcher-&gt;find_nearest_neighbors(0, 10); <span class="comment">// 10 nearest neighbors of the first element.</span></div>
<div class="line"><span class="keyword">auto</span> results2 = searcher-&gt;find_nearest_neighbors(query, 10); <span class="comment">// 10 nearest neighbors of a query vector.</span></div>
<div class="ttc" id="aclassknncolle_1_1Dispatch_html"><div class="ttname"><a href="classknncolle_1_1Dispatch.html">knncolle::Dispatch</a></div><div class="ttdoc">Top-level helper class to run any available search algorithms.</div><div class="ttdef"><b>Definition:</b> knncolle.hpp:40</div></div>
<div class="ttc" id="aclassknncolle_1_1Dispatch_html_a03ab914b4f36aad8791b84cf84859db0"><div class="ttname"><a href="classknncolle_1_1Dispatch.html#a03ab914b4f36aad8791b84cf84859db0">knncolle::Dispatch::build</a></div><div class="ttdeci">std::shared_ptr&lt; Base&lt; INDEX_t, DISTANCE_t, QUERY_t &gt; &gt; build(INDEX_t ndim, INDEX_t nobs, const INPUT *vals, DispatchAlgorithm algorithm)</div><div class="ttdef"><b>Definition:</b> knncolle.hpp:136</div></div>
<div class="ttc" id="aknncolle_8hpp_html"><div class="ttname"><a href="knncolle_8hpp.html">knncolle.hpp</a></div><div class="ttdoc">Umbrella header to include all algorithms.</div></div>
<div class="ttc" id="aknncolle_8hpp_html_ac3e4a6ff9f871a52a999276b90ec691e"><div class="ttname"><a href="knncolle_8hpp.html#ac3e4a6ff9f871a52a999276b90ec691e">knncolle::DispatchAlgorithm</a></div><div class="ttdeci">DispatchAlgorithm</div><div class="ttdef"><b>Definition:</b> knncolle.hpp:26</div></div>
</div><!-- fragment --><p>The <code>find_nearest_neighbors()</code> call will return a vector of (index, distance) pairs, containing the requested number of neighbors in order of increasing distance from the query point. (In cases where the requested number of neighbors is greater than the actual number of neighbors, the latter is returned.) For some algorithms, we can modify the parameters of the search by setting the relevant members of the <code>Dispatch</code> class:</p>
<div class="fragment"><div class="line">dispatcher.<a class="code" href="classknncolle_1_1Dispatch.html#a9e5377e9ff61374aee3f23d7d2b559cc">Annoy</a>.<a class="code" href="structknncolle_1_1Dispatch_1_1Annoy__param.html#ac0cdc7d10bb58a3a19fa9a84f13996bd">ntrees</a> = 100;</div>
<div class="line"><span class="keyword">auto</span> searcher_annoy = dispatcher.<a class="code" href="classknncolle_1_1Dispatch.html#a03ab914b4f36aad8791b84cf84859db0">build</a>(ndim, nobs, matrix.data(), knncolle::ANNOY);</div>
<div class="ttc" id="aclassknncolle_1_1Dispatch_html_a9e5377e9ff61374aee3f23d7d2b559cc"><div class="ttname"><a href="classknncolle_1_1Dispatch.html#a9e5377e9ff61374aee3f23d7d2b559cc">knncolle::Dispatch::Annoy</a></div><div class="ttdeci">Annoy_param Annoy</div><div class="ttdef"><b>Definition:</b> knncolle.hpp:95</div></div>
<div class="ttc" id="astructknncolle_1_1Dispatch_1_1Annoy__param_html_ac0cdc7d10bb58a3a19fa9a84f13996bd"><div class="ttname"><a href="structknncolle_1_1Dispatch_1_1Annoy__param.html#ac0cdc7d10bb58a3a19fa9a84f13996bd">knncolle::Dispatch::Annoy_param::ntrees</a></div><div class="ttdeci">bool ntrees</div><div class="ttdef"><b>Definition:</b> knncolle.hpp:84</div></div>
</div><!-- fragment --><p>If the desired algorithm is known at compile time, we can be more specific:</p>
<div class="fragment"><div class="line"><a class="code" href="classknncolle_1_1AnnoySearch.html">knncolle::AnnoyEuclidean&lt;&gt;</a> searcher(ndim, nobs, matrix.data(), <span class="comment">/* ntrees = */</span> 100); </div>
<div class="ttc" id="aclassknncolle_1_1AnnoySearch_html"><div class="ttname"><a href="classknncolle_1_1AnnoySearch.html">knncolle::AnnoySearch</a></div><div class="ttdoc">Perform an approximate nearest neighbor search with Annoy.</div><div class="ttdef"><b>Definition:</b> Annoy.hpp:56</div></div>
</div><!-- fragment --><p>Check out the <a href="https://ltla.github.io/knncolle/">reference documentation</a> for more details.</p>
<h1>Building projects with <b>knncolle</b></h1>
<p>If you're using CMake, you just need to add something like this to your <code>CMakeLists.txt</code>:</p>
<div class="fragment"><div class="line">include(FetchContent)</div>
<div class="line"> </div>
<div class="line">FetchContent_Declare(</div>
<div class="line">  knncolle</div>
<div class="line">  GIT_REPOSITORY https://github.com/LTLA/knncolle</div>
<div class="line">  GIT_TAG master # or any version of interest</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line">FetchContent_MakeAvailable(knncolle)</div>
</div><!-- fragment --><p>Then you can link to <b>knncolle</b> to make the headers available during compilation:</p>
<div class="fragment"><div class="line"># For executables:</div>
<div class="line">target_link_libraries(myexe knncolle)</div>
<div class="line"> </div>
<div class="line"># For libaries</div>
<div class="line">target_link_libraries(mylib INTERFACE knncolle)</div>
</div><!-- fragment --><p>If you're not using CMake, the simple approach is to just copy the files - either directly or with Git submodules - and include their path during compilation with, e.g., GCC's <code>-I</code>. Note that this will require the manual inclusion of all dependencies, namely the <a href="https://github.com/spotify/annoy">Annoy</a> and <a href="https://github.com/nmslib/hsnwlib">HNSW</a> libraries.</p>
<h1>TODO:</h1>
<ul>
<li>Add KMKNN as another exact method. </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
