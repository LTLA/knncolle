<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>knncolle: knncolle::VpTree&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_t &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">knncolle
   </div>
   <div id="projectbrief">Collection of KNN methods in C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>knncolle</b></li><li class="navelem"><a class="el" href="classknncolle_1_1VpTree.html">VpTree</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classknncolle_1_1VpTree-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">knncolle::VpTree&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_t &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Perform a nearest neighbor search based on a vantage point (VP) tree.  
 <a href="classknncolle_1_1VpTree.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="VpTree_8hpp_source.html">VpTree.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for knncolle::VpTree&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_t &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classknncolle_1_1VpTree__inherit__graph.png" border="0" usemap="#aknncolle_1_1VpTree_3_01DISTANCE_00_01INDEX__t_00_01DISTANCE__t_00_01QUERY__t_00_01INTERNAL__t_01_4_inherit__map" alt="Inheritance graph"/></div>
<map name="aknncolle_1_1VpTree_3_01DISTANCE_00_01INDEX__t_00_01DISTANCE__t_00_01QUERY__t_00_01INTERNAL__t_01_4_inherit__map" id="aknncolle_1_1VpTree_3_01DISTANCE_00_01INDEX__t_00_01DISTANCE__t_00_01QUERY__t_00_01INTERNAL__t_01_4_inherit__map">
<area shape="rect" title="Perform a nearest neighbor search based on a vantage point (VP) tree." alt="" coords="5,95,219,151"/>
<area shape="rect" href="classknncolle_1_1Base.html" title=" " alt="" coords="45,5,179,47"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for knncolle::VpTree&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_t &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classknncolle_1_1VpTree__coll__graph.png" border="0" usemap="#aknncolle_1_1VpTree_3_01DISTANCE_00_01INDEX__t_00_01DISTANCE__t_00_01QUERY__t_00_01INTERNAL__t_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="aknncolle_1_1VpTree_3_01DISTANCE_00_01INDEX__t_00_01DISTANCE__t_00_01QUERY__t_00_01INTERNAL__t_01_4_coll__map" id="aknncolle_1_1VpTree_3_01DISTANCE_00_01INDEX__t_00_01DISTANCE__t_00_01QUERY__t_00_01INTERNAL__t_01_4_coll__map">
<area shape="rect" title="Perform a nearest neighbor search based on a vantage point (VP) tree." alt="" coords="5,95,219,151"/>
<area shape="rect" href="classknncolle_1_1Base.html" title=" " alt="" coords="45,5,179,47"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8869f31b0220424c7318b86709bbf69e"><td class="memItemLeft" align="right" valign="top">INDEX_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1VpTree.html#a8869f31b0220424c7318b86709bbf69e">nobs</a> () const</td></tr>
<tr class="separator:a8869f31b0220424c7318b86709bbf69e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a912697b91cd4f8a9458bd3b988dadf6f"><td class="memItemLeft" align="right" valign="top">INDEX_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1VpTree.html#a912697b91cd4f8a9458bd3b988dadf6f">ndim</a> () const</td></tr>
<tr class="separator:a912697b91cd4f8a9458bd3b988dadf6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca1b408fa65305107cfc7fb49d5b9f84"><td class="memTemplParams" colspan="2">template&lt;typename INPUT_t &gt; </td></tr>
<tr class="memitem:aca1b408fa65305107cfc7fb49d5b9f84"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classknncolle_1_1VpTree.html#aca1b408fa65305107cfc7fb49d5b9f84">VpTree</a> (INDEX_t <a class="el" href="classknncolle_1_1VpTree.html#a912697b91cd4f8a9458bd3b988dadf6f">ndim</a>, INDEX_t <a class="el" href="classknncolle_1_1VpTree.html#a8869f31b0220424c7318b86709bbf69e">nobs</a>, const INPUT_t *vals)</td></tr>
<tr class="separator:aca1b408fa65305107cfc7fb49d5b9f84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0489d4abad60c1f5079540c80da31e39"><td class="memItemLeft" align="right" valign="top"><a id="a0489d4abad60c1f5079540c80da31e39" name="a0489d4abad60c1f5079540c80da31e39"></a>
std::vector&lt; std::pair&lt; INDEX_t, DISTANCE_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>find_nearest_neighbors</b> (INDEX_t index, int k) const</td></tr>
<tr class="separator:a0489d4abad60c1f5079540c80da31e39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc837815a60d9dee181569e52e40fbbf"><td class="memItemLeft" align="right" valign="top"><a id="adc837815a60d9dee181569e52e40fbbf" name="adc837815a60d9dee181569e52e40fbbf"></a>
std::vector&lt; std::pair&lt; INDEX_t, DISTANCE_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>find_nearest_neighbors</b> (const QUERY_t *query, int k) const</td></tr>
<tr class="separator:adc837815a60d9dee181569e52e40fbbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa75f744c0e8f344a667454dbb21dd61f"><td class="memItemLeft" align="right" valign="top"><a id="aa75f744c0e8f344a667454dbb21dd61f" name="aa75f744c0e8f344a667454dbb21dd61f"></a>
const QUERY_t *&#160;</td><td class="memItemRight" valign="bottom"><b>observation</b> (INDEX_t index, QUERY_t *buffer) const</td></tr>
<tr class="separator:aa75f744c0e8f344a667454dbb21dd61f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classknncolle_1_1Base"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classknncolle_1_1Base')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classknncolle_1_1Base.html">knncolle::Base&lt; int, double, double &gt;</a></td></tr>
<tr class="memitem:af71a6194f8c10982817d0f7a2d1e37a6 inherit pub_methods_classknncolle_1_1Base"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1Base.html#af71a6194f8c10982817d0f7a2d1e37a6">nobs</a> () const=0</td></tr>
<tr class="separator:af71a6194f8c10982817d0f7a2d1e37a6 inherit pub_methods_classknncolle_1_1Base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a544049d99949710f35a067fc7e48c0a7 inherit pub_methods_classknncolle_1_1Base"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1Base.html#a544049d99949710f35a067fc7e48c0a7">ndim</a> () const=0</td></tr>
<tr class="separator:a544049d99949710f35a067fc7e48c0a7 inherit pub_methods_classknncolle_1_1Base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a58c1e4d737ce01515129c5b5257327 inherit pub_methods_classknncolle_1_1Base"><td class="memItemLeft" align="right" valign="top">virtual const double *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1Base.html#a2a58c1e4d737ce01515129c5b5257327">observation</a> (int index, double *buffer) const=0</td></tr>
<tr class="separator:a2a58c1e4d737ce01515129c5b5257327 inherit pub_methods_classknncolle_1_1Base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7616f71913cd269283b5669a7d01176 inherit pub_methods_classknncolle_1_1Base"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1Base.html#ab7616f71913cd269283b5669a7d01176">observation</a> (int index) const</td></tr>
<tr class="separator:ab7616f71913cd269283b5669a7d01176 inherit pub_methods_classknncolle_1_1Base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a966ab9bdec2815809241637b1ab90334 inherit pub_methods_classknncolle_1_1Base"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; std::pair&lt; int, double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1Base.html#a966ab9bdec2815809241637b1ab90334">find_nearest_neighbors</a> (int index, int k) const=0</td></tr>
<tr class="separator:a966ab9bdec2815809241637b1ab90334 inherit pub_methods_classknncolle_1_1Base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a21b15908c0c80094402cce2e496626 inherit pub_methods_classknncolle_1_1Base"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; std::pair&lt; int, double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1Base.html#a1a21b15908c0c80094402cce2e496626">find_nearest_neighbors</a> (const double *query, int k) const=0</td></tr>
<tr class="separator:a1a21b15908c0c80094402cce2e496626 inherit pub_methods_classknncolle_1_1Base"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;class DISTANCE, typename INDEX_t = int, typename DISTANCE_t = double, typename QUERY_t = DISTANCE_t, typename INTERNAL_t = DISTANCE_t&gt;<br />
class knncolle::VpTree&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_t &gt;</div><p >Perform a nearest neighbor search based on a vantage point (VP) tree. </p>
<p >In a vantage point tree (Yianilos, 1993), each node contains a subset of points that is split into two further partitions. The split is determined by picking an arbitrary point inside that subset as the node center, computing the distance to all other points from the center, and using the median distance as the "radius" of a hypersphere. The left child of this node contains all points within that hypersphere while the right child contains the remaining points. This procedure is applied recursively until all points resolve to individual nodes, thus yielding a VP tree. Upon searching, the algorithm traverses the tree and exploits the triangle inequality between query points and node centers to narrow the search space.</p>
<p >The major advantage of VP trees over more conventional KD-trees or ball trees is that the former does not need to construct intermediate nodes, instead using the data points themselves at the nodes. This reduces the memory usage of the tree and total number of distance calculations for any search. It can also be very useful when the concept of an intermediate is not well-defined (e.g., for non-numeric data), though this is not particularly relevant for <b>knncolle</b>.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">DISTANCE</td><td>Class to compute the distance between vectors, see <code>distance::Euclidean</code> for an example. </td></tr>
    <tr><td class="paramname">INDEX_t</td><td>Integer type for the indices. </td></tr>
    <tr><td class="paramname">DISTANCE_t</td><td>Floating point type for the distances. </td></tr>
    <tr><td class="paramname">QUERY_t</td><td>Floating point type for the query data. </td></tr>
    <tr><td class="paramname">INTERNAL_t</td><td>Floating point type for the internal data store.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>Yianilos PN (1993). Data structures and algorithms for nearest neighbor search in general metric spaces. <em>Proceedings of the Fourth Annual ACM-SIAM Symposium on Discrete Algorithms</em>, 311-321.</dd>
<dd>
Hanov S (2011). VP trees: A data structure for finding stuff fast. <a href="http://stevehanov.ca/blog/index.php?id=130">http://stevehanov.ca/blog/index.php?id=130</a> </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aca1b408fa65305107cfc7fb49d5b9f84" name="aca1b408fa65305107cfc7fb49d5b9f84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca1b408fa65305107cfc7fb49d5b9f84">&#9670;&nbsp;</a></span>VpTree()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class DISTANCE , typename INDEX_t  = int, typename DISTANCE_t  = double, typename QUERY_t  = DISTANCE_t, typename INTERNAL_t  = DISTANCE_t&gt; </div>
<div class="memtemplate">
template&lt;typename INPUT_t &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classknncolle_1_1VpTree.html">knncolle::VpTree</a>&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_t &gt;::VpTree </td>
          <td>(</td>
          <td class="paramtype">INDEX_t&#160;</td>
          <td class="paramname"><em>ndim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INDEX_t&#160;</td>
          <td class="paramname"><em>nobs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const INPUT_t *&#160;</td>
          <td class="paramname"><em>vals</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ndim</td><td>Number of dimensions. </td></tr>
    <tr><td class="paramname">nobs</td><td>Number of observations. </td></tr>
    <tr><td class="paramname">vals</td><td>Pointer to an array of length <code>ndim * nobs</code>, corresponding to a dimension-by-observation matrix in column-major format, i.e., contiguous elements belong to the same observation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">INPUT_t</td><td>Floating-point type of the input data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a912697b91cd4f8a9458bd3b988dadf6f" name="a912697b91cd4f8a9458bd3b988dadf6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a912697b91cd4f8a9458bd3b988dadf6f">&#9670;&nbsp;</a></span>ndim()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class DISTANCE , typename INDEX_t  = int, typename DISTANCE_t  = double, typename QUERY_t  = DISTANCE_t, typename INTERNAL_t  = DISTANCE_t&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">INDEX_t <a class="el" href="classknncolle_1_1VpTree.html">knncolle::VpTree</a>&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_t &gt;::ndim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get the number of dimensions. </p>

<p>Implements <a class="el" href="classknncolle_1_1Base.html#a544049d99949710f35a067fc7e48c0a7">knncolle::Base&lt; int, double, double &gt;</a>.</p>

</div>
</div>
<a id="a8869f31b0220424c7318b86709bbf69e" name="a8869f31b0220424c7318b86709bbf69e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8869f31b0220424c7318b86709bbf69e">&#9670;&nbsp;</a></span>nobs()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class DISTANCE , typename INDEX_t  = int, typename DISTANCE_t  = double, typename QUERY_t  = DISTANCE_t, typename INTERNAL_t  = DISTANCE_t&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">INDEX_t <a class="el" href="classknncolle_1_1VpTree.html">knncolle::VpTree</a>&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_t &gt;::nobs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get the number of observations in the dataset to be searched. </p>

<p>Implements <a class="el" href="classknncolle_1_1Base.html#af71a6194f8c10982817d0f7a2d1e37a6">knncolle::Base&lt; int, double, double &gt;</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>knncolle/VpTree/<a class="el" href="VpTree_8hpp_source.html">VpTree.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
