<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>knncolle: knncolle::Kmknn&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_t &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">knncolle
   </div>
   <div id="projectbrief">Collection of KNN methods in C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>knncolle</b></li><li class="navelem"><a class="el" href="classknncolle_1_1Kmknn.html">Kmknn</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classknncolle_1_1Kmknn-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">knncolle::Kmknn&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_t &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Perform a nearest neighbor search based on k-means clustering.  
 <a href="classknncolle_1_1Kmknn.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Kmknn_8hpp_source.html">Kmknn.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for knncolle::Kmknn&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_t &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classknncolle_1_1Kmknn__inherit__graph.png" border="0" usemap="#aknncolle_1_1Kmknn_3_01DISTANCE_00_01INDEX__t_00_01DISTANCE__t_00_01QUERY__t_00_01INTERNAL__t_01_4_inherit__map" alt="Inheritance graph"/></div>
<map name="aknncolle_1_1Kmknn_3_01DISTANCE_00_01INDEX__t_00_01DISTANCE__t_00_01QUERY__t_00_01INTERNAL__t_01_4_inherit__map" id="aknncolle_1_1Kmknn_3_01DISTANCE_00_01INDEX__t_00_01DISTANCE__t_00_01QUERY__t_00_01INTERNAL__t_01_4_inherit__map">
<area shape="rect" title="Perform a nearest neighbor search based on k&#45;means clustering." alt="" coords="5,95,219,151"/>
<area shape="rect" href="classknncolle_1_1Base.html" title=" " alt="" coords="45,5,179,47"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for knncolle::Kmknn&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_t &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classknncolle_1_1Kmknn__coll__graph.png" border="0" usemap="#aknncolle_1_1Kmknn_3_01DISTANCE_00_01INDEX__t_00_01DISTANCE__t_00_01QUERY__t_00_01INTERNAL__t_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="aknncolle_1_1Kmknn_3_01DISTANCE_00_01INDEX__t_00_01DISTANCE__t_00_01QUERY__t_00_01INTERNAL__t_01_4_coll__map" id="aknncolle_1_1Kmknn_3_01DISTANCE_00_01INDEX__t_00_01DISTANCE__t_00_01QUERY__t_00_01INTERNAL__t_01_4_coll__map">
<area shape="rect" title="Perform a nearest neighbor search based on k&#45;means clustering." alt="" coords="5,95,219,151"/>
<area shape="rect" href="classknncolle_1_1Base.html" title=" " alt="" coords="45,5,179,47"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1b498b744b3c367ba47200d5104fb76c"><td class="memItemLeft" align="right" valign="top">INDEX_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1Kmknn.html#a1b498b744b3c367ba47200d5104fb76c">nobs</a> () const</td></tr>
<tr class="separator:a1b498b744b3c367ba47200d5104fb76c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5757f65516886071b2b5df0b7c6d9ca"><td class="memItemLeft" align="right" valign="top">INDEX_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1Kmknn.html#af5757f65516886071b2b5df0b7c6d9ca">ndim</a> () const</td></tr>
<tr class="separator:af5757f65516886071b2b5df0b7c6d9ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b1787d62b52d58d0cc0af8fc6ee3e22"><td class="memTemplParams" colspan="2">template&lt;typename INPUT_t &gt; </td></tr>
<tr class="memitem:a9b1787d62b52d58d0cc0af8fc6ee3e22"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classknncolle_1_1Kmknn.html#a9b1787d62b52d58d0cc0af8fc6ee3e22">Kmknn</a> (INDEX_t <a class="el" href="classknncolle_1_1Kmknn.html#af5757f65516886071b2b5df0b7c6d9ca">ndim</a>, INDEX_t <a class="el" href="classknncolle_1_1Kmknn.html#a1b498b744b3c367ba47200d5104fb76c">nobs</a>, const INPUT_t *vals, double power=0.5)</td></tr>
<tr class="separator:a9b1787d62b52d58d0cc0af8fc6ee3e22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a457a69ac4161f35f6b80dbeda090d406"><td class="memItemLeft" align="right" valign="top"><a id="a457a69ac4161f35f6b80dbeda090d406"></a>
std::vector&lt; std::pair&lt; INDEX_t, DISTANCE_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>find_nearest_neighbors</b> (INDEX_t index, int k) const</td></tr>
<tr class="separator:a457a69ac4161f35f6b80dbeda090d406"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5a21104fc1723cc17fb08d16726e69d"><td class="memItemLeft" align="right" valign="top"><a id="ae5a21104fc1723cc17fb08d16726e69d"></a>
std::vector&lt; std::pair&lt; INDEX_t, DISTANCE_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>find_nearest_neighbors</b> (const QUERY_t *query, int k) const</td></tr>
<tr class="separator:ae5a21104fc1723cc17fb08d16726e69d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0f915f4d4ea11e1dbf6d6f6bba247d8"><td class="memItemLeft" align="right" valign="top"><a id="af0f915f4d4ea11e1dbf6d6f6bba247d8"></a>
const QUERY_t *&#160;</td><td class="memItemRight" valign="bottom"><b>observation</b> (INDEX_t index, QUERY_t *buffer) const</td></tr>
<tr class="separator:af0f915f4d4ea11e1dbf6d6f6bba247d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classknncolle_1_1Base"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classknncolle_1_1Base')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classknncolle_1_1Base.html">knncolle::Base&lt; int, double, double &gt;</a></td></tr>
<tr class="memitem:abe1f8bfc6f37fd0c98ec75fe1fdc67de inherit pub_methods_classknncolle_1_1Base"><td class="memItemLeft" align="right" valign="top">virtual const double *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1Base.html#abe1f8bfc6f37fd0c98ec75fe1fdc67de">observation</a> (int index, double *buffer) const=0</td></tr>
<tr class="separator:abe1f8bfc6f37fd0c98ec75fe1fdc67de inherit pub_methods_classknncolle_1_1Base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adea88ffb0a8a00877ac4be912092faee inherit pub_methods_classknncolle_1_1Base"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1Base.html#adea88ffb0a8a00877ac4be912092faee">observation</a> (int index) const</td></tr>
<tr class="separator:adea88ffb0a8a00877ac4be912092faee inherit pub_methods_classknncolle_1_1Base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d93c10180af2a5bc1cfc96db0b8f09b inherit pub_methods_classknncolle_1_1Base"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; std::pair&lt; int, double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1Base.html#a7d93c10180af2a5bc1cfc96db0b8f09b">find_nearest_neighbors</a> (int index, int k) const=0</td></tr>
<tr class="separator:a7d93c10180af2a5bc1cfc96db0b8f09b inherit pub_methods_classknncolle_1_1Base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac183dbf506dccfb3414eff89ce87939a inherit pub_methods_classknncolle_1_1Base"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; std::pair&lt; int, double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1Base.html#ac183dbf506dccfb3414eff89ce87939a">find_nearest_neighbors</a> (const double *query, int k) const=0</td></tr>
<tr class="separator:ac183dbf506dccfb3414eff89ce87939a inherit pub_methods_classknncolle_1_1Base"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class DISTANCE, typename INDEX_t = int, typename DISTANCE_t = double, typename QUERY_t = double, typename INTERNAL_t = double&gt;<br />
class knncolle::Kmknn&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_t &gt;</h3>

<p>Perform a nearest neighbor search based on k-means clustering. </p>
<p>In the k-means with k-nearest neighbors (KMKNN) algorithm (Wang, 2012), k-means clustering is first applied to the data points, with the number of cluster centers defined as the square root of the number of points. The cluster assignment and distance to the assigned cluster center for each point represent the KMKNN indexing information, allowing us to speed up the nearest neighbor search by exploiting the triangle inequality between cluster centers, the query point and each point in the cluster to narrow the search space. The advantage of the KMKNN approach is its simplicity and minimal overhead, resulting in performance improvements over conventional tree-based methods for high-dimensional data where most points need to be searched anyway.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">DISTANCE</td><td>Class to compute the distance between vectors, see <code>distance::Euclidean</code> for an example. </td></tr>
    <tr><td class="paramname">INDEX_t</td><td>Integer type for the indices. </td></tr>
    <tr><td class="paramname">DISTANCE_t</td><td>Floating point type for the distances. </td></tr>
    <tr><td class="paramname">QUERY_t</td><td>Floating point type for the query data. </td></tr>
    <tr><td class="paramname">INTERNAL_t</td><td>Floating point type for the data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>Wang X (2012). A fast exact k-nearest neighbors algorithm for high dimensional search using k-means clustering and triangle inequality. <em>Proc Int Jt Conf Neural Netw</em>, 43, 6:2351-2358. </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9b1787d62b52d58d0cc0af8fc6ee3e22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b1787d62b52d58d0cc0af8fc6ee3e22">&#9670;&nbsp;</a></span>Kmknn()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class DISTANCE , typename INDEX_t  = int, typename DISTANCE_t  = double, typename QUERY_t  = double, typename INTERNAL_t  = double&gt; </div>
<div class="memtemplate">
template&lt;typename INPUT_t &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classknncolle_1_1Kmknn.html">knncolle::Kmknn</a>&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_t &gt;::<a class="el" href="classknncolle_1_1Kmknn.html">Kmknn</a> </td>
          <td>(</td>
          <td class="paramtype">INDEX_t&#160;</td>
          <td class="paramname"><em>ndim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INDEX_t&#160;</td>
          <td class="paramname"><em>nobs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const INPUT_t *&#160;</td>
          <td class="paramname"><em>vals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>power</em> = <code>0.5</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ndim</td><td>Number of dimensions. </td></tr>
    <tr><td class="paramname">nobs</td><td>Number of observations. </td></tr>
    <tr><td class="paramname">vals</td><td>Pointer to an array of length <code>ndim * nobs</code>, corresponding to a dimension-by-observation matrix in column-major format, i.e., contiguous elements belong to the same observation. </td></tr>
    <tr><td class="paramname">power</td><td>Power of <code>nobs</code> to define the number of cluster centers. By default, a square root is performed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">INPUT_t</td><td>Floating-point type of the input data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af5757f65516886071b2b5df0b7c6d9ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5757f65516886071b2b5df0b7c6d9ca">&#9670;&nbsp;</a></span>ndim()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class DISTANCE , typename INDEX_t  = int, typename DISTANCE_t  = double, typename QUERY_t  = double, typename INTERNAL_t  = double&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">INDEX_t <a class="el" href="classknncolle_1_1Kmknn.html">knncolle::Kmknn</a>&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_t &gt;::ndim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the number of dimensions. </p>

<p>Implements <a class="el" href="classknncolle_1_1Base.html#a544049d99949710f35a067fc7e48c0a7">knncolle::Base&lt; int, double, double &gt;</a>.</p>

</div>
</div>
<a id="a1b498b744b3c367ba47200d5104fb76c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b498b744b3c367ba47200d5104fb76c">&#9670;&nbsp;</a></span>nobs()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class DISTANCE , typename INDEX_t  = int, typename DISTANCE_t  = double, typename QUERY_t  = double, typename INTERNAL_t  = double&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">INDEX_t <a class="el" href="classknncolle_1_1Kmknn.html">knncolle::Kmknn</a>&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_t &gt;::nobs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the number of observations in the dataset to be searched. </p>

<p>Implements <a class="el" href="classknncolle_1_1Base.html#af71a6194f8c10982817d0f7a2d1e37a6">knncolle::Base&lt; int, double, double &gt;</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>knncolle/Kmknn/<a class="el" href="Kmknn_8hpp_source.html">Kmknn.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
