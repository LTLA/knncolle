<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>knncolle: knncolle::AnnoySearch&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_INDEX_t, INTERNAL_DATA_t &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">knncolle
   </div>
   <div id="projectbrief">Collection of KNN methods in C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>knncolle</b></li><li class="navelem"><a class="el" href="classknncolle_1_1AnnoySearch.html">AnnoySearch</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classknncolle_1_1AnnoySearch-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">knncolle::AnnoySearch&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_INDEX_t, INTERNAL_DATA_t &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Perform an approximate nearest neighbor search with Annoy.  
 <a href="classknncolle_1_1AnnoySearch.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Annoy_8hpp_source.html">Annoy.hpp</a>&gt;</code></p>

<p>Inherits Base&lt; int, double, double &gt;.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae2e8616ee4f969c6b0cba2ad044df8c2"><td class="memItemLeft" align="right" valign="top"><a id="ae2e8616ee4f969c6b0cba2ad044df8c2"></a>
INDEX_t&#160;</td><td class="memItemRight" valign="bottom"><b>nobs</b> () const</td></tr>
<tr class="separator:ae2e8616ee4f969c6b0cba2ad044df8c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5199d712d2312a5300f455093b0643d5"><td class="memItemLeft" align="right" valign="top"><a id="a5199d712d2312a5300f455093b0643d5"></a>
INDEX_t&#160;</td><td class="memItemRight" valign="bottom"><b>ndim</b> () const</td></tr>
<tr class="separator:a5199d712d2312a5300f455093b0643d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa141cd7397624e9740e2a0cbf993a74c"><td class="memTemplParams" colspan="2">template&lt;typename INPUT &gt; </td></tr>
<tr class="memitem:aa141cd7397624e9740e2a0cbf993a74c"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classknncolle_1_1AnnoySearch.html#aa141cd7397624e9740e2a0cbf993a74c">AnnoySearch</a> (INDEX_t ndim, INDEX_t nobs, const INPUT *vals, int ntrees=AnnoyDefaults::ntrees, double search_mult=AnnoyDefaults::search_mult)</td></tr>
<tr class="separator:aa141cd7397624e9740e2a0cbf993a74c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0a05436e48f58600cb9aae5dd7ef21f"><td class="memItemLeft" align="right" valign="top"><a id="ae0a05436e48f58600cb9aae5dd7ef21f"></a>
std::vector&lt; std::pair&lt; INDEX_t, DISTANCE_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>find_nearest_neighbors</b> (INDEX_t index, int k) const</td></tr>
<tr class="separator:ae0a05436e48f58600cb9aae5dd7ef21f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8c14ddf64889590e4c110294e135122"><td class="memItemLeft" align="right" valign="top"><a id="ab8c14ddf64889590e4c110294e135122"></a>
std::vector&lt; std::pair&lt; INDEX_t, DISTANCE_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>find_nearest_neighbors</b> (const QUERY_t *query, int k) const</td></tr>
<tr class="separator:ab8c14ddf64889590e4c110294e135122"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97ec0b51550242e2c82c19046585545f"><td class="memItemLeft" align="right" valign="top"><a id="a97ec0b51550242e2c82c19046585545f"></a>
const QUERY_t *&#160;</td><td class="memItemRight" valign="bottom"><b>observation</b> (INDEX_t index, QUERY_t *buffer) const</td></tr>
<tr class="separator:a97ec0b51550242e2c82c19046585545f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class DISTANCE, typename INDEX_t = int, typename DISTANCE_t = double, typename QUERY_t = double, typename INTERNAL_INDEX_t = int32_t, typename INTERNAL_DATA_t = float&gt;<br />
class knncolle::AnnoySearch&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_INDEX_t, INTERNAL_DATA_t &gt;</h3>

<p>Perform an approximate nearest neighbor search with Annoy. </p>
<p>In the Approximate Nearest Neighbors Oh Yeah (Annoy) algorithm, a tree is constructed where a random hyperplane splits the points into two subsets at each internal node. Leaf nodes are defined when the number of points in a subset falls below a threshold (close to twice the number of dimensions for the settings used here). Multiple trees are constructed in this manner, each of which is different due to the random choice of hyperplanes. For a given query point, each tree is searched to identify the subset of all points in the same leaf node as the query point. The union of these subsets across all trees is exhaustively searched to identify the actual nearest neighbors to the query.</p>
<dl class="section see"><dt>See also</dt><dd>Bernhardsson E (2018). Annoy. <a href="https://github.com/spotify/annoy">https://github.com/spotify/annoy</a></dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">DISTANCE</td><td>An <b>Annoy</b>-derived class to compute the distance between vectors. Note that this is not the same as the classes in <code><a class="el" href="distances_8hpp.html" title="Classes for distance calculations.">distances.hpp</a></code>. </td></tr>
    <tr><td class="paramname">INDEX_t</td><td>Integer type for the indices. </td></tr>
    <tr><td class="paramname">DISTANCE_t</td><td>Floating point type for the distances. </td></tr>
    <tr><td class="paramname">INTERNAL_INDEX_t</td><td>Integer type for the internal indices. </td></tr>
    <tr><td class="paramname">INTERNAL_DATA_t</td><td>Floating point type for the internal data store. This uses a <code>float</code> instead of a <code>double</code> to sacrifice some accuracy for performance. </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa141cd7397624e9740e2a0cbf993a74c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa141cd7397624e9740e2a0cbf993a74c">&#9670;&nbsp;</a></span>AnnoySearch()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class DISTANCE , typename INDEX_t  = int, typename DISTANCE_t  = double, typename QUERY_t  = double, typename INTERNAL_INDEX_t  = int32_t, typename INTERNAL_DATA_t  = float&gt; </div>
<div class="memtemplate">
template&lt;typename INPUT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classknncolle_1_1AnnoySearch.html">knncolle::AnnoySearch</a>&lt; DISTANCE, INDEX_t, DISTANCE_t, QUERY_t, INTERNAL_INDEX_t, INTERNAL_DATA_t &gt;::<a class="el" href="classknncolle_1_1AnnoySearch.html">AnnoySearch</a> </td>
          <td>(</td>
          <td class="paramtype">INDEX_t&#160;</td>
          <td class="paramname"><em>ndim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INDEX_t&#160;</td>
          <td class="paramname"><em>nobs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const INPUT *&#160;</td>
          <td class="paramname"><em>vals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ntrees</em> = <code>AnnoyDefaults::ntrees</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>search_mult</em> = <code>AnnoyDefaults::search_mult</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ndim</td><td>Number of dimensions. </td></tr>
    <tr><td class="paramname">nobs</td><td>Number of observations. </td></tr>
    <tr><td class="paramname">vals</td><td>Pointer to an array of length <code>ndim * nobs</code>, corresponding to a dimension-by-observation matrix in column-major format, i.e., contiguous elements belong to the same observation. </td></tr>
    <tr><td class="paramname">ntrees</td><td>Number of trees to construct. Larger values improve accuracy at the cost of index size (i.e., memory usage), see <a href="https://github.com/spotify/annoy#tradeoffs">here</a> for details. </td></tr>
    <tr><td class="paramname">search_mult</td><td>Factor that is multiplied by the number of neighbors <code>k</code> to determine the number of nodes to search in <code>find_nearest_neighbors()</code>. Larger values improve accuracy at the cost of runtime, see <a href="https://github.com/spotify/annoy#tradeoffs">here</a> for details. If set to -1, it defaults to <code>ntrees</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">INPUT</td><td>Floating-point type of the input data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>knncolle/Annoy/<a class="el" href="Annoy_8hpp_source.html">Annoy.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
