<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>knncolle: knncolle::Hnsw&lt; SPACE, INDEX_t, DISTANCE_t, QUERY_t &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">knncolle
   </div>
   <div id="projectbrief">Collection of KNN methods in C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>knncolle</b></li><li class="navelem"><a class="el" href="classknncolle_1_1Hnsw.html">Hnsw</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classknncolle_1_1Hnsw-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">knncolle::Hnsw&lt; SPACE, INDEX_t, DISTANCE_t, QUERY_t &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Perform an approximate nearest neighbor search with HNSW.  
 <a href="classknncolle_1_1Hnsw.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Hnsw_8hpp_source.html">Hnsw.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for knncolle::Hnsw&lt; SPACE, INDEX_t, DISTANCE_t, QUERY_t &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classknncolle_1_1Hnsw__inherit__graph.png" border="0" usemap="#aknncolle_1_1Hnsw_3_01SPACE_00_01INDEX__t_00_01DISTANCE__t_00_01QUERY__t_01_4_inherit__map" alt="Inheritance graph"/></div>
<map name="aknncolle_1_1Hnsw_3_01SPACE_00_01INDEX__t_00_01DISTANCE__t_00_01QUERY__t_01_4_inherit__map" id="aknncolle_1_1Hnsw_3_01SPACE_00_01INDEX__t_00_01DISTANCE__t_00_01QUERY__t_01_4_inherit__map">
<area shape="rect" title="Perform an approximate nearest neighbor search with HNSW." alt="" coords="5,95,175,151"/>
<area shape="rect" href="classknncolle_1_1knn__base.html" title=" " alt="" coords="16,5,164,47"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for knncolle::Hnsw&lt; SPACE, INDEX_t, DISTANCE_t, QUERY_t &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classknncolle_1_1Hnsw__coll__graph.png" border="0" usemap="#aknncolle_1_1Hnsw_3_01SPACE_00_01INDEX__t_00_01DISTANCE__t_00_01QUERY__t_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="aknncolle_1_1Hnsw_3_01SPACE_00_01INDEX__t_00_01DISTANCE__t_00_01QUERY__t_01_4_coll__map" id="aknncolle_1_1Hnsw_3_01SPACE_00_01INDEX__t_00_01DISTANCE__t_00_01QUERY__t_01_4_coll__map">
<area shape="rect" title="Perform an approximate nearest neighbor search with HNSW." alt="" coords="5,95,175,151"/>
<area shape="rect" href="classknncolle_1_1knn__base.html" title=" " alt="" coords="16,5,164,47"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a47ebc6910b2e7eedb442b95124365e44"><td class="memItemLeft" align="right" valign="top">INDEX_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1Hnsw.html#a47ebc6910b2e7eedb442b95124365e44">nobs</a> () const</td></tr>
<tr class="separator:a47ebc6910b2e7eedb442b95124365e44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a669e7734e90da6fe0d11d485bd6abaef"><td class="memItemLeft" align="right" valign="top">INDEX_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1Hnsw.html#a669e7734e90da6fe0d11d485bd6abaef">ndim</a> () const</td></tr>
<tr class="separator:a669e7734e90da6fe0d11d485bd6abaef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d8a1e355acb6e81a6262a243c72455f"><td class="memTemplParams" colspan="2">template&lt;typename INPUT &gt; </td></tr>
<tr class="memitem:a0d8a1e355acb6e81a6262a243c72455f"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classknncolle_1_1Hnsw.html#a0d8a1e355acb6e81a6262a243c72455f">Hnsw</a> (INDEX_t <a class="el" href="classknncolle_1_1Hnsw.html#a669e7734e90da6fe0d11d485bd6abaef">ndim</a>, INDEX_t <a class="el" href="classknncolle_1_1Hnsw.html#a47ebc6910b2e7eedb442b95124365e44">nobs</a>, const INPUT *vals, int nlinks=HnswDefaults::nlinks, int ef_construction=HnswDefaults::ef_construction, int ef_search=HnswDefaults::ef_search)</td></tr>
<tr class="separator:a0d8a1e355acb6e81a6262a243c72455f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eb38437c13393d526240667df709333"><td class="memItemLeft" align="right" valign="top"><a id="a4eb38437c13393d526240667df709333"></a>
std::vector&lt; std::pair&lt; INDEX_t, DISTANCE_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>find_nearest_neighbors</b> (INDEX_t index, int k) const</td></tr>
<tr class="separator:a4eb38437c13393d526240667df709333"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f5f4cbed4d2acdb97d78371bda1a3cc"><td class="memItemLeft" align="right" valign="top"><a id="a9f5f4cbed4d2acdb97d78371bda1a3cc"></a>
std::vector&lt; std::pair&lt; INDEX_t, DISTANCE_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>find_nearest_neighbors</b> (const QUERY_t *query, int k) const</td></tr>
<tr class="separator:a9f5f4cbed4d2acdb97d78371bda1a3cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classknncolle_1_1knn__base"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classknncolle_1_1knn__base')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classknncolle_1_1knn__base.html">knncolle::knn_base&lt; int, double, double &gt;</a></td></tr>
<tr class="memitem:a6333b53ccc5c80da53b736f0ebd8e051 inherit pub_methods_classknncolle_1_1knn__base"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; std::pair&lt; int, double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1knn__base.html#a6333b53ccc5c80da53b736f0ebd8e051">find_nearest_neighbors</a> (int index, int k) const=0</td></tr>
<tr class="separator:a6333b53ccc5c80da53b736f0ebd8e051 inherit pub_methods_classknncolle_1_1knn__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59ebba6f71672e3c36849c47f52b516d inherit pub_methods_classknncolle_1_1knn__base"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; std::pair&lt; int, double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1knn__base.html#a59ebba6f71672e3c36849c47f52b516d">find_nearest_neighbors</a> (const double *query, int k) const=0</td></tr>
<tr class="separator:a59ebba6f71672e3c36849c47f52b516d inherit pub_methods_classknncolle_1_1knn__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class SPACE, typename INDEX_t = int, typename DISTANCE_t = double, typename QUERY_t = double&gt;<br />
class knncolle::Hnsw&lt; SPACE, INDEX_t, DISTANCE_t, QUERY_t &gt;</h3>

<p>Perform an approximate nearest neighbor search with HNSW. </p>
<p>In the HNSW algorithm (Malkov and Yashunin, 2016), each point is a node in a \dQuote{nagivable small world} graph. The nearest neighbor search proceeds by starting at a node and walking through the graph to obtain closer neighbors to a given query point. Nagivable small world graphs are used to maintain connectivity across the data set by creating links between distant points. This speeds up the search by ensuring that the algorithm does not need to take many small steps to move from one cluster to another. The HNSW algorithm extends this idea by using a hierarchy of such graphs containing links of different lengths, which avoids wasting time on small steps in the early stages of the search where the current node position is far from the query.</p>
<dl class="section see"><dt>See also</dt><dd>Malkov YA, Yashunin DA (2016). Efficient and robust approximate nearest neighbor search using Hierarchical Navigable Small World graphs. <em>arXiv</em>. <a href="https://arxiv.org/abs/1603.09320">https://arxiv.org/abs/1603.09320</a></dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">DISTANCE</td><td>An <b>hnswlib</b>-derived class to compute the distance between vectors. Note that this is not the same as the classes in <code><a class="el" href="distances_8hpp.html" title="Classes for distance calculations.">distances.hpp</a></code>. </td></tr>
    <tr><td class="paramname">INDEX_t</td><td>Integer type for the indices. </td></tr>
    <tr><td class="paramname">DISTANCE_t</td><td>Floating point type for the distances. </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0d8a1e355acb6e81a6262a243c72455f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d8a1e355acb6e81a6262a243c72455f">&#9670;&nbsp;</a></span>Hnsw()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class SPACE , typename INDEX_t  = int, typename DISTANCE_t  = double, typename QUERY_t  = double&gt; </div>
<div class="memtemplate">
template&lt;typename INPUT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classknncolle_1_1Hnsw.html">knncolle::Hnsw</a>&lt; SPACE, INDEX_t, DISTANCE_t, QUERY_t &gt;::<a class="el" href="classknncolle_1_1Hnsw.html">Hnsw</a> </td>
          <td>(</td>
          <td class="paramtype">INDEX_t&#160;</td>
          <td class="paramname"><em>ndim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INDEX_t&#160;</td>
          <td class="paramname"><em>nobs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const INPUT *&#160;</td>
          <td class="paramname"><em>vals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nlinks</em> = <code>HnswDefaults::nlinks</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ef_construction</em> = <code>HnswDefaults::ef_construction</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ef_search</em> = <code>HnswDefaults::ef_search</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ndim</td><td>Number of dimensions. </td></tr>
    <tr><td class="paramname">nobs</td><td>Number of observations. </td></tr>
    <tr><td class="paramname">vals</td><td>Pointer to an array of length <code>ndim * nobs</code>, corresponding to a dimension-by-observation matrix in column-major format, i.e., contiguous elements belong to the same observation. </td></tr>
    <tr><td class="paramname">nlinks</td><td>Number of bidirectional links for each node. This is equivalent to the <code>M</code> parameter in the underlying <b>hnswlib</b> library, see <a href="https://github.com/nmslib/hnswlib/blob/master/ALGO_PARAMS.md">here</a> for details. </td></tr>
    <tr><td class="paramname">ef_construction</td><td>Size of the dynamic list of nearest neighbors during index construction. This controls the trade-off between indexing time and accuracy and is equivalent to the <code>ef_construct</code> parameter in the underlying <b>hnswlib</b> library, see <a href="https://github.com/nmslib/hnswlib/blob/master/ALGO_PARAMS.md">here</a> for details. </td></tr>
    <tr><td class="paramname">ef_search</td><td>Size of the dynamic list of nearest neighbors during searching. This controls the trade-off between search speed and accuracy and is equivalent to the <code>ef</code> parameter in the underlying <b>hnswlib</b> library, see <a href="https://github.com/nmslib/hnswlib/blob/master/ALGO_PARAMS.md">here</a> for details.</td></tr>
  </table>
  </dd>
</dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">INPUT</td><td>Floating-point type of the input data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a669e7734e90da6fe0d11d485bd6abaef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a669e7734e90da6fe0d11d485bd6abaef">&#9670;&nbsp;</a></span>ndim()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class SPACE , typename INDEX_t  = int, typename DISTANCE_t  = double, typename QUERY_t  = double&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">INDEX_t <a class="el" href="classknncolle_1_1Hnsw.html">knncolle::Hnsw</a>&lt; SPACE, INDEX_t, DISTANCE_t, QUERY_t &gt;::ndim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the number of dimensions. </p>

<p>Implements <a class="el" href="classknncolle_1_1knn__base.html#a6576816c284207b88d774b9dd3160948">knncolle::knn_base&lt; int, double, double &gt;</a>.</p>

</div>
</div>
<a id="a47ebc6910b2e7eedb442b95124365e44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47ebc6910b2e7eedb442b95124365e44">&#9670;&nbsp;</a></span>nobs()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class SPACE , typename INDEX_t  = int, typename DISTANCE_t  = double, typename QUERY_t  = double&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">INDEX_t <a class="el" href="classknncolle_1_1Hnsw.html">knncolle::Hnsw</a>&lt; SPACE, INDEX_t, DISTANCE_t, QUERY_t &gt;::nobs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the number of observations in the dataset to be searched. </p>

<p>Implements <a class="el" href="classknncolle_1_1knn__base.html#ac1b89128bee92a46a94dd0fe9655eddb">knncolle::knn_base&lt; int, double, double &gt;</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>knncolle/Hnsw/<a class="el" href="Hnsw_8hpp_source.html">Hnsw.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
